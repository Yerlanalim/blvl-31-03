# Задача 4.7: Интеграция хука `useSettings` для загрузки и сохранения настроек

## Описание
Интегрировать хук `useSettings` в компоненты настроек для обеспечения загрузки и сохранения настроек пользователя, а также глобального управления темой приложения.

## Ссылки на документацию
docs/bizlevel-project-context.md
docs/status.md

## Конкретные шаги для Cursor
1. Обновить компоненты форм настроек для использования хука `useSettings`
2. Создать контекст настроек для управления глобальными настройками (например, темой)
3. Интегрировать настройки темы с ThemeProvider
4. Реализовать автоматическую загрузку настроек при входе пользователя

## Промт для Cursor
```
Помоги мне интегрировать хук `useSettings` в компоненты настроек для проекта BizLevel.

Задача состоит из нескольких частей:

1. Обновить компоненты форм настроек для правильного использования хуков useSettings и useUpdateSettings:
   - Предзаполнение форм данными из useSettings
   - Корректное сохранение изменений через useUpdateSettings
   - Обработка состояний загрузки и ошибок

2. Создать глобальный контекст настроек для управления общими настройками:
   - Создать файл `src/context/SettingsContext.tsx`
   - Реализовать SettingsProvider, который будет использовать useSettings для загрузки настроек
   - Предоставлять настройки и функции их обновления через контекст

3. Интегрировать настройки темы с ThemeProvider:
   - Обновить файл `src/app/providers.tsx`, чтобы ThemeProvider использовал тему из настроек пользователя
   - Реализовать синхронизацию темы при её изменении

4. Реализовать автоматическую загрузку настроек при входе пользователя:
   - Обновить хук useSettings, чтобы он загружал настройки, когда пользователь аутентифицирован
   - Использовать useEffect для подписки на изменения аутентификации

5. Создать хук useSettingsContext для удобного доступа к контексту настроек:
   - Создать файл `src/hooks/useSettingsContext.ts`
   - Реализовать хук, который будет использовать SettingsContext и проверять его наличие

Пожалуйста, реализуй эти компоненты и интеграции для обеспечения полного функционала настроек пользователя.

После выполнения задачи обнови status.md, указав, что задача 4.7 выполнена.
```

## Ожидаемый результат
- Обновленные компоненты форм настроек с использованием хука `useSettings`
- Созданный контекст настроек для управления глобальными настройками
- Интеграция настроек темы с ThemeProvider
- Реализованная автоматическая загрузка настроек при входе пользователя
- Созданный хук `useSettingsContext` для удобного доступа к контексту настроек
- Обновленный файл status.md с отметкой о выполнении задачи 4.7

## Связь с другими задачами
- Эта задача следует за задачей 4.6: Реализация формы для изменения настроек пользователя
- После выполнения этой задачи завершается Этап 4 и можно перейти к Этапу 5: Прогресс Пользователя и Уровни (Карта Уровней), начиная с задачи 5.1: Определение основных TypeScript типов

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-4.7-integrate-usesettings.md**: Интеграция хука `useSettings` для загрузки и сохранения настроек
```
