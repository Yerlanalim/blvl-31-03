# Задача 7.2: Безопасная настройка ключа API OpenAI в `.env.local`

## Описание
Настроить безопасное хранение и использование ключа API OpenAI в переменных окружения проекта, а также обновить API Route для корректного использования этого ключа.


## Конкретные шаги для Cursor
1. Обновить файл `.env.local`, добавив переменную для ключа API OpenAI
2. Создать файл `src/lib/openai.ts` для инициализации клиента OpenAI
3. Убедиться, что `.env.local` добавлен в `.gitignore` для безопасности
4. Обновить API Route для использования централизованного клиента OpenAI

## Промт для Cursor
```
Помоги мне настроить безопасное хранение и использование ключа API OpenAI в проекте BizLevel.

Нам нужно:

1. Обновить файл `.env.local`, добавив переменную окружения для ключа API OpenAI:
   ```
   OPENAI_API_KEY=your_api_key_here
   ```

2. Создать файл `src/lib/openai.ts` для инициализации клиента OpenAI:
   - Файл должен импортировать необходимые зависимости (может потребоваться установить пакет openai)
   - Файл должен создавать и экспортировать инстанс клиента OpenAI с ключом из переменных окружения
   - Добавить проверку наличия ключа API и выбрасывать ошибку, если ключ отсутствует

3. Проверить, что `.env.local` добавлен в `.gitignore` для предотвращения случайной публикации ключа API

4. Обновить файл `src/app/api/chat/route.ts`, чтобы использовать централизованный клиент OpenAI из `src/lib/openai.ts`

5. Создать файл `src/lib/constants.ts` (если еще не создан) и добавить константы для работы с OpenAI:
   - OPENAI_MODEL = 'gpt-4-turbo' или 'gpt-3.5-turbo'
   - SYSTEM_PROMPT - инструкция для модели, описывающая роль ассистента BizLevel
   - MAX_TOKENS - ограничение на количество токенов в ответе
   - TEMPERATURE - настройка "творческости" модели (обычно 0.7-0.9)

6. Добавить в файл `README.md` инструкцию о необходимости настройки ключа API OpenAI перед запуском проекта

Поскольку нам может потребоваться установить пакет openai, если он еще не установлен, предоставь команду для его установки.

Пожалуйста, помоги с созданием и обновлением указанных файлов.

После выполнения задачи обнови status.md, указав, что задача 7.2 выполнена.
```

## Ожидаемый результат
- Обновленный файл `.env.local` с переменной для ключа API OpenAI
- Созданный файл `src/lib/openai.ts` для инициализации клиента OpenAI
- Проверка наличия `.env.local` в `.gitignore`
- Обновленный API Route с использованием централизованного клиента OpenAI
- Созданный файл `src/lib/constants.ts` с константами для работы с OpenAI
- Обновленный файл `README.md` с инструкцией по настройке ключа API
- Установленный пакет openai (если необходимо)
- Обновленный файл status.md с отметкой о выполнении задачи 7.2

## Связь с другими задачами
- Эта задача следует за задачей 7.1: Создание API Route для взаимодействия с OpenAI
- После выполнения этой задачи следует перейти к задаче 7.3: Создание `chat-service.ts`

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-7.2-setup-openai-key.md**: Безопасная настройка ключа API OpenAI в `.env.local`
```
