# Задача 9.10: Настройка прямого взаимодействия с Firebase из админ-панели

## Описание
Реализовать инструменты для прямого взаимодействия с Firebase из админ-панели, позволяющие администраторам просматривать и редактировать данные в Firestore и Storage без необходимости использования внешних инструментов.


## Конкретные шаги для Cursor
1. Создать интерфейс для просмотра коллекций и документов Firestore
2. Создать интерфейс для просмотра и управления файлами в Storage
3. Реализовать функциональность редактирования данных
4. Интегрировать инструменты в админ-панель

## Промт для Cursor
```
Помоги мне реализовать инструменты для прямого взаимодействия с Firebase из админ-панели проекта BizLevel.

Нам нужно создать интерфейс, который позволит администраторам просматривать и редактировать данные в Firestore и Storage непосредственно из админ-панели, без необходимости использования внешних инструментов. Это обеспечит более удобное управление данными и позволит вносить изменения напрямую. Для этого выполним следующие шаги:

1. Создай файл `src/app/(admin)/firebase/page.tsx`:
   - Страница для прямого взаимодействия с Firebase
   - Должна содержать табы для переключения между Firestore и Storage
   - Должна отображать навигационное дерево коллекций Firestore и папок Storage
   - Должна использовать компоненты из shadcn/ui (Tabs, TreeView)

2. Создай файл `src/components/admin/firebase/FirestoreExplorer.tsx`:
   - Компонент для просмотра и редактирования данных Firestore
   - Должен отображать список коллекций Firestore
   - Должен позволять выбрать коллекцию и просмотреть список документов
   - Должен отображать данные выбранного документа в формате JSON или в виде формы
   - Должен позволять редактировать данные документа
   - Должен поддерживать создание новых документов и коллекций
   - Должен поддерживать удаление документов и коллекций
   - Должен обрабатывать ошибки и состояния загрузки
   - Должен использовать компоненты из shadcn/ui (Table, TreeView, Form)

3. Создай файл `src/components/admin/firebase/StorageExplorer.tsx`:
   - Компонент для просмотра и управления файлами в Storage
   - Должен отображать список папок и файлов в Storage
   - Должен позволять просматривать содержимое папок
   - Должен отображать метаданные выбранного файла
   - Должен позволять скачивать файлы
   - Должен поддерживать загрузку новых файлов
   - Должен поддерживать создание новых папок
   - Должен поддерживать удаление файлов и папок
   - Должен обрабатывать ошибки и состояния загрузки
   - Должен использовать компоненты из shadcn/ui (Table, TreeView, FileUpload)

4. Создай файл `src/components/admin/firebase/JsonEditor.tsx`:
   - Компонент для редактирования данных в формате JSON
   - Должен отображать данные в формате JSON с подсветкой синтаксиса
   - Должен позволять редактировать данные
   - Должен проверять валидность JSON
   - Должен поддерживать сохранение изменений
   - Можно использовать библиотеку для редактирования JSON (например, react-json-editor-ajrm)

5. Создай файл `src/components/admin/firebase/DatabaseBrowser.tsx`:
   - Компонент для навигации по коллекциям и документам Firestore
   - Должен отображать древовидную структуру коллекций и документов
   - Должен поддерживать раскрытие/скрытие узлов дерева
   - Должен позволять выбрать коллекцию или документ для просмотра и редактирования
   - Должен обновляться при изменениях в базе данных
   - Должен использовать компоненты из shadcn/ui (TreeView)

6. Расширь файл `src/lib/services/admin-service.ts`:
   - Добавь функции для работы с Firebase:
     - `getCollections(): Promise<string[]>` - получение списка коллекций Firestore
     - `getDocuments(collection: string): Promise<string[]>` - получение списка документов в коллекции
     - `getDocument(collection: string, documentId: string): Promise<any>` - получение данных документа
     - `updateDocument(collection: string, documentId: string, data: any): Promise<void>` - обновление документа
     - `createDocument(collection: string, documentId: string | null, data: any): Promise<string>` - создание документа
     - `deleteDocument(collection: string, documentId: string): Promise<void>` - удаление документа
     - Аналогичные функции для работы с Storage

7. Обнови файл `src/components/admin/AdminSidebar.tsx`:
   - Добавь пункт меню "Firebase" для перехода на страницу прямого взаимодействия с Firebase

Все компоненты должны:
- Использовать компоненты из shadcn/ui для стилизации
- Быть типизированы с использованием TypeScript
- Иметь адаптивный дизайн для разных размеров экрана
- Обрабатывать состояния загрузки и ошибок
- Использовать toast-уведомления для обратной связи
- Иметь подтверждения для опасных операций (удаление, перезапись)

Пожалуйста, создай указанные файлы для реализации прямого взаимодействия с Firebase из админ-панели.

После выполнения задачи обнови status.md, указав, что задача 9.10 выполнена.
```

## Ожидаемый результат
- Созданные файлы:
  - `src/app/(admin)/firebase/page.tsx`
  - `src/components/admin/firebase/FirestoreExplorer.tsx`
  - `src/components/admin/firebase/StorageExplorer.tsx`
  - `src/components/admin/firebase/JsonEditor.tsx`
  - `src/components/admin/firebase/DatabaseBrowser.tsx`
- Обновленные файлы:
  - `src/lib/services/admin-service.ts`
  - `src/components/admin/AdminSidebar.tsx`
- Интерфейс для просмотра и редактирования данных в Firestore
- Интерфейс для просмотра и управления файлами в Storage
- Возможность создания, обновления и удаления данных напрямую из админ-панели
- Обновленный файл status.md с отметкой о выполнении задачи 9.10

## Связь с другими задачами
- Эта задача следует за задачей 9.9: Реализация CRUD-операций для артефактов
- После выполнения этой задачи завершается Этап 9 и можно перейти к Этапу 10: Тестирование и Оптимизация, начиная с задачи 10.1: Настройка среды тестирования

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-9.10-implement-firebase-direct-integration.md**: Настройка прямого взаимодействия с Firebase из админ-панели
```
