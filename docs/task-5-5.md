# Задача 5.5: Создание хука `useProgress`

## Описание
Создать пользовательский хук `useProgress`, который будет использовать React Query для получения и обновления прогресса пользователя.

## Ссылки на документацию
- [Этап 5, Шаг 5](../BizLevel-%20План%20Реализации%20Проекта.%2031.03.rtf): Хук `useProgress`
- [Раздел 5: Управление Состоянием (React Query)](../BizLevel-%20План%20Реализации%20Проекта.%2031.03.rtf): Описание использования React Query

## Конкретные шаги для Cursor
1. Создать файл `src/hooks/useProgress.ts`
2. Реализовать хук `useProgress` с использованием `useQuery` для получения прогресса пользователя
3. Добавить мутации для всех функций-модификаторов из `progress-service.ts`
4. Добавить вспомогательные функции для проверки состояний (просмотрено ли видео, пройден ли тест и т.д.)

## Промт для Cursor
```
Помоги мне создать хук `useProgress` для проекта BizLevel.

Нам нужно создать файл `src/hooks/useProgress.ts`, который будет содержать хук для работы с прогрессом пользователя, используя React Query.

Хук должен:
1. Использовать `useQuery` для получения данных о прогрессе пользователя
2. Использовать `useMutation` для всех функций-модификаторов из `progress-service.ts`
3. Автоматически инвалидировать запросы при успешных мутациях
4. Предоставлять вспомогательные функции для проверки состояний

Вот структура, которую нужно реализовать:

1. Основной хук `useProgress`:
   - Принимает userId (опционально, если не передан, использует значение из useAuth)
   - Использует `useQuery` с ключом ['userProgress', userId] для вызова `getUserProgress`
   - Возвращает объект с данными о прогрессе и состоянием запроса

2. Мутации для обновления прогресса:
   - `useMarkVideoWatched` - мутация для отметки просмотра видео
   - `useMarkTestCompleted` - мутация для отметки прохождения теста
   - `useMarkArtifactDownloaded` - мутация для отметки скачивания артефакта
   - `useCompleteLevel` - мутация для завершения уровня

3. Вспомогательные функции (внутри хука `useProgress`):
   - `isVideoWatched(videoId: string): boolean` - проверка, просмотрено ли видео
   - `isTestCompleted(testId: string): boolean` - проверка, пройден ли тест
   - `isArtifactDownloaded(artifactId: string): boolean` - проверка, скачан ли артефакт
   - `isLevelCompleted(levelId: string): boolean` - проверка, завершен ли уровень
   - `canCompleteLevelCheck(levelId: string, level: Level): { canComplete: boolean, reason?: string }` - проверка, может ли пользователь завершить уровень

4. Интеграция с toast-уведомлениями:
   - Показывать toast-уведомления при успешных и неуспешных мутациях

Пожалуйста, создай файл `src/hooks/useProgress.ts` с указанной функциональностью, используя React Query, хуки `useAuth` и `useToast` (или `toast` из библиотеки sonner).

После выполнения задачи обнови status.md, указав, что задача 5.5 выполнена.
```

## Ожидаемый результат
- Созданный файл `src/hooks/useProgress.ts`
- Реализованный хук `useProgress` с использованием `useQuery`
- Реализованные мутации для всех функций-модификаторов из `progress-service.ts`
- Добавленные вспомогательные функции для проверки состояний
- Интеграция с toast-уведомлениями
- Обновленный файл status.md с отметкой о выполнении задачи 5.5

## Связь с другими задачами
- Эта задача следует за задачей 5.4: Создание `level-service.ts`
- После выполнения этой задачи следует перейти к задаче 5.6: Создание хуков `useLevels` и `useLevel`

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-5.5-create-useprogress-hook.md**: Создание хука `useProgress` (`src/hooks/useProgress.ts`) с `useQuery` для `getUserProgress` и `useMutation` для действий
```
