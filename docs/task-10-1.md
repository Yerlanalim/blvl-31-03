# Задача 10.1: Настройка среды тестирования

## Описание
Настроить среду тестирования для проекта BizLevel, включая инструменты для юнит-тестирования (Vitest/Jest) и тестирования компонентов (React Testing Library).

## Ссылки на документацию
- [Этап 9, Шаг 1](../BizLevel-%20План%20Реализации%20Проекта.%2031.03.rtf): Настройка среды тестирования (Vitest/Jest + RTL)
- [Раздел 2: Технологический Стек](../BizLevel-%20План%20Реализации%20Проекта.%2031.03.rtf): Тестирование: Jest / Vitest + React Testing Library

## Конкретные шаги для Cursor
1. Установить необходимые зависимости для тестирования
2. Настроить конфигурацию для Vitest/Jest
3. Создать базовые структуры для тестов
4. Настроить моки для Firebase и других зависимостей

## Промт для Cursor
```
Помоги мне настроить среду тестирования для проекта BizLevel.

Нам нужно настроить среду для юнит-тестирования и тестирования компонентов с использованием Vitest (или Jest) и React Testing Library. Для этого выполним следующие шаги:

1. Установка зависимостей:
   - Определи список необходимых зависимостей для тестирования:
     - Vitest (или Jest)
     - @testing-library/react
     - @testing-library/jest-dom
     - @testing-library/user-event
     - jsdom (для Vitest)
     - vitest-mock-extended (для мокирования)
     - Другие необходимые зависимости

   - Сгенерируй команду для установки этих зависимостей с помощью npm (предпочтительно Vitest, так как он более современный и быстрый)

2. Создай конфигурационный файл для Vitest:
   - Создай файл `vite.config.ts` (если еще не создан) или обнови его, добавив конфигурацию для тестирования
   - Настрой использование jsdom для эмуляции браузерного окружения
   - Настрой пути для разрешения импортов (alias `@/*`)
   - Настрой coverage (покрытие кода тестами)

3. Создай вспомогательные файлы для тестирования:
   - Создай файл `src/test/setup.ts` для глобальной настройки тестового окружения
   - Настрой импорт @testing-library/jest-dom для добавления матчеров (toBeInTheDocument и т.д.)
   - Настрой моки для объектов, которые не доступны в jsdom (localStorage, matchMedia и т.д.)

4. Создай файлы для моков зависимостей:
   - Создай директорию `src/test/mocks`
   - Создай файл `src/test/mocks/firebase.ts` для мокирования Firebase
   - Создай другие необходимые моки (например, для next/navigation)

5. Создай файл `src/test/utils.tsx` с вспомогательными функциями для тестирования:
   - Функция для рендеринга компонентов с необходимыми провайдерами (AuthProvider, QueryClientProvider и т.д.)
   - Функция для мокирования хуков

6. Создай пример тестового файла:
   - Создай директорию `src/components/ui/__tests__`
   - Создай пример теста для простого компонента, например, Button

7. Обнови package.json, добавив скрипты для запуска тестов:
   - "test": "vitest"
   - "test:watch": "vitest watch"
   - "test:coverage": "vitest run --coverage"

Пожалуйста, создай или обнови указанные файлы для настройки среды тестирования.

После выполнения задачи обнови status.md, указав, что задача 10.1 выполнена.
```

## Ожидаемый результат
- Установленные зависимости для тестирования
- Созданные/обновленные файлы:
  - `vite.config.ts` (с конфигурацией для тестирования)
  - `src/test/setup.ts`
  - `src/test/mocks/firebase.ts`
  - `src/test/utils.tsx`
  - `src/components/ui/__tests__/Button.test.tsx` (пример)
- Обновленный файл `package.json` с скриптами для запуска тестов
- Работающая команда для запуска тестов
- Обновленный файл status.md с отметкой о выполнении задачи 10.1

## Связь с другими задачами
- Эта задача следует за задачей 9.10 и начинает Этап 10
- После выполнения этой задачи следует перейти к задаче 10.2: Написание юнит-тестов для ключевых компонентов

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-10.1-setup-testing-environment.md**: Настройка среды тестирования (Vitest/Jest + RTL)
```
