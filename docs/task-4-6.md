# Задача 4.6: Реализация формы для изменения настроек пользователя

## Описание
Реализовать формы для изменения профиля пользователя и настроек приложения, включая загрузку аватара в Firebase Storage, изменение имени и настроек темы/уведомлений.

## Ссылки на документацию
- [Этап 4, Шаг 6](../BizLevel-%20План%20Реализации%20Проекта.%2031.03.rtf): Реализация формы для обновления профиля
- [Раздел 3.3: Личный кабинет пользователя (Профиль)](../Данные%20по%20МВП,%2025.04.pdf): Упоминание настроек пользователя

## Конкретные шаги для Cursor
1. Создать директорию `src/components/features/settings/` (если она еще не создана)
2. Создать компоненты форм для разных категорий настроек:
   - `ProfileSettingsForm.tsx` - для изменения имени и загрузки аватара
   - `AppearanceSettingsForm.tsx` - для настройки темы
   - `NotificationSettingsForm.tsx` - для настроек уведомлений
   - `AccountSettingsForm.tsx` - для настроек аккаунта
3. Реализовать функционал загрузки аватара в Firebase Storage
4. Интегрировать формы на страницу настроек

## Промт для Cursor
```
Помоги мне реализовать формы для изменения настроек пользователя в проекте BizLevel.

Нам нужно создать несколько компонентов форм в директории `src/components/features/settings/`:

1. `ProfileSettingsForm.tsx` - форма для изменения личных данных пользователя:
   - Поля: displayName, photoURL (загрузка аватара)
   - Использование React Hook Form и Zod для валидации
   - Функционал загрузки аватара в Firebase Storage
   - Обновление данных пользователя через хук useUpdateUserProfile

2. `AppearanceSettingsForm.tsx` - форма для настройки внешнего вида:
   - Выбор темы (light, dark, system)
   - Другие настройки отображения (если есть)
   - Сохранение настроек через хук useUpdateSettings

3. `NotificationSettingsForm.tsx` - форма для настроек уведомлений:
   - Переключатели для разных типов уведомлений
   - Сохранение настроек через хук useUpdateSettings

4. `AccountSettingsForm.tsx` - форма для настроек аккаунта:
   - Возможность изменения email
   - Ссылка на изменение пароля (перенаправление на страницу /reset-password или отдельная форма)
   - Использование функций из useAuth

Все формы должны:
- Использовать компоненты форм из shadcn/ui
- Валидировать данные с помощью Zod
- Показывать состояния загрузки при отправке
- Отображать toast-уведомления о результате операции
- Иметь адекватную обработку ошибок

Также нужно обновить страницу настроек, чтобы интегрировать эти формы в соответствующие вкладки.

Для реализации загрузки аватара нужно:
1. Создать или обновить `src/lib/firebase/storage.ts` с функцией для загрузки файлов
2. Реализовать компонент загрузки изображения с предпросмотром
3. Интегрировать загрузку с формой профиля

Пожалуйста, создай эти компоненты и обнови страницу настроек.

После выполнения задачи обнови status.md, указав, что задача 4.6 выполнена.
```

## Ожидаемый результат
- Созданные компоненты форм в директории `src/components/features/settings/`:
  - `ProfileSettingsForm.tsx`
  - `AppearanceSettingsForm.tsx`
  - `NotificationSettingsForm.tsx`
  - `AccountSettingsForm.tsx`
- Реализованный функционал загрузки аватара в Firebase Storage
- Интегрированные формы на страницу настроек
- Работающая валидация и обработка ошибок
- Обновленный файл status.md с отметкой о выполнении задачи 4.6

## Связь с другими задачами
- Эта задача следует за задачей 4.5: Создание страницы `/settings`
- После выполнения этой задачи следует перейти к задаче 4.7: Интеграция хука `useSettings` для загрузки и сохранения настроек

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-4.6-implement-settings-form.md**: Реализация формы для изменения `displayName`, `photoURL` (с загрузкой аватара в Storage) и настроек темы/уведомлений
```
