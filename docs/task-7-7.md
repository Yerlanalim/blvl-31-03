# Задача 7.7: Интеграция `useChat` для управления состоянием и взаимодействием чата

## Описание
Интегрировать хук `useChat` на страницу чата для управления состоянием и взаимодействием с компонентами чата.

## Ссылки на документацию
- [Этап 7, Шаг 7](../BizLevel-%20План%20Реализации%20Проекта.%2031.03.rtf): Интеграция `useChat` для управления состоянием и взаимодействием чата
- [Раздел 5: Управление Состоянием (React Query)](../BizLevel-%20План%20Реализации%20Проекта.%2031.03.rtf): Описание использования хуков с React Query

## Конкретные шаги для Cursor
1. Обновить страницу `src/app/(routes)/chat/page.tsx`
2. Интегрировать хук `useChat` для получения данных и функций для взаимодействия с чатом
3. Передать данные и функции в компоненты чата
4. Реализовать обработку ошибок и состояний загрузки

## Промт для Cursor
```
Помоги мне интегрировать хук `useChat` на страницу чата в проекте BizLevel.

Нам нужно обновить файл `src/app/(routes)/chat/page.tsx`, чтобы использовать хук `useChat` для управления состоянием и взаимодействием с компонентами чата.

Обновление должно включать следующие шаги:

1. Импортировать хук `useChat` из `src/hooks/useChat`
2. Импортировать компоненты чата из `src/components/features/Chat`
3. Использовать хук `useChat` для получения:
   - Истории сообщений (`messages`)
   - Функции для отправки сообщения (`sendMessage`)
   - Функции для очистки истории (`clearHistory`)
   - Статусов загрузки (`isLoading`, `isSending`)
   - Ошибок (`error`, `sendError`)
4. Передать полученные данные и функции в компоненты чата:
   - `ChatWindow` должен получить все необходимые пропсы
   - Обработать случаи загрузки и ошибок
5. Реализовать обработчики:
   - `handleSendMessage` для отправки сообщения
   - `handleClearHistory` для очистки истории
6. Добавить обработку ошибок:
   - Показывать сообщение об ошибке, если не удалось загрузить историю
   - Показывать сообщение об ошибке, если не удалось отправить сообщение
7. Улучшить UX:
   - Добавить toast-уведомления о результатах операций
   - Добавить подсказки для нового пользователя (например, приветственное сообщение от ассистента)
   - Добавить плавные анимации при загрузке и отправке сообщений

Пожалуйста, обнови файл `src/app/(routes)/chat/page.tsx` с учетом этих требований.

После выполнения задачи обнови status.md, указав, что задача 7.7 выполнена.
```

## Ожидаемый результат
- Обновленный файл `src/app/(routes)/chat/page.tsx`
- Интегрированный хук `useChat` для получения данных и функций
- Передача данных и функций в компоненты чата
- Реализованные обработчики для отправки сообщений и очистки истории
- Обработка ошибок и состояний загрузки
- Улучшенный UX с toast-уведомлениями и анимациями
- Обновленный файл status.md с отметкой о выполнении задачи 7.7

## Связь с другими задачами
- Эта задача следует за задачей 7.6: Реализация компонентов чата
- После выполнения этой задачи завершается Этап 7 и можно перейти к Этапу 8: FAQ, начиная с задачи 8.1: Создание `faq-service.ts`

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-7.7-integrate-usechat.md**: Интеграция `useChat` для управления состоянием и взаимодействием чата
```
