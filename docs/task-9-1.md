# Задача 9.1: Создание защищенного роута для админ-панели

## Описание
Создать защищенный роут для админ-панели, который будет доступен только для пользователей с ролью администратора.

## Ссылки на документацию
- [Требование дополнительной админ-панели](../paste.txt): Упоминание необходимости создания админ-панели для управления пользователями, уроками и артефактами

## Конкретные шаги для Cursor
1. Обновить тип `User` для включения роли пользователя
2. Создать директорию `src/app/(admin)` для роутов админ-панели
3. Реализовать проверку роли пользователя в `AuthProvider`
4. Создать компонент `AdminRoute` для защиты роутов админ-панели

## Промт для Cursor
```
Помоги мне создать защищенный роут для админ-панели в проекте BizLevel.

Нам нужно создать роут, который будет доступен только для пользователей с ролью администратора. Для этого необходимо выполнить следующие шаги:

1. Обновить тип `User` в `src/types/index.ts`:
   - Добавить поле `role: 'user' | 'admin'` для определения роли пользователя

2. Обновить `AuthContext.tsx`:
   - Добавить проверку роли пользователя в `AuthProvider`
   - Добавить функцию `isAdmin()` для проверки, является ли текущий пользователь администратором

3. Обновить `useAuth.ts`:
   - Добавить экспорт функции `isAdmin`

4. Создать файл `src/components/auth/AdminRoute.tsx`:
   - Компонент для защиты роутов админ-панели
   - Должен проверять, является ли пользователь администратором
   - Если пользователь не администратор, должен перенаправлять на главную страницу или показывать сообщение о недостаточных правах
   - Должен отображать компонент загрузки во время проверки

5. Создать директорию `src/app/(admin)` для роутов админ-панели

6. Создать файл `src/app/(admin)/layout.tsx`:
   - Должен использовать компонент `AdminRoute` для защиты всех роутов внутри группы `(admin)`
   - Должен иметь базовый макет для админ-панели

7. Создать файл `src/app/(admin)/page.tsx`:
   - Страница-редирект на основной раздел админ-панели (например, `/admin/users`)

8. Обновить файл `src/lib/firebase/firestore.ts`:
   - Добавить функцию для проверки роли пользователя по его ID

9. Обновить `src/lib/services/settings-service.ts`:
   - Добавить функцию для обновления роли пользователя (только для использования в админ-панели)

Пожалуйста, создай и обнови указанные файлы для реализации защищенного роута админ-панели.

После выполнения задачи обнови status.md, указав, что задача 9.1 выполнена.
```

## Ожидаемый результат
- Обновленный тип `User` с полем `role`
- Обновленный контекст `AuthContext` с проверкой роли пользователя
- Обновленный хук `useAuth` с функцией `isAdmin`
- Созданный компонент `AdminRoute` для защиты роутов админ-панели
- Созданная директория `src/app/(admin)` для роутов админ-панели
- Созданный файл `src/app/(admin)/layout.tsx` с защитой роутов
- Созданный файл `src/app/(admin)/page.tsx` для редиректа
- Обновленный файл `src/lib/firebase/firestore.ts` с функцией проверки роли
- Обновленный файл `src/lib/services/settings-service.ts` с функцией обновления роли
- Обновленный файл status.md с отметкой о выполнении задачи 9.1

## Связь с другими задачами
- Эта задача следует за задачей 8.5 и начинает Этап 9
- После выполнения этой задачи следует перейти к задаче 9.2: Создание макета админ-панели

## Обновление progress-tracking
После выполнения задачи обновите файл development-plan.md, заменив `[ ]` на `[x]` для этой задачи:
```
* [x] **task-9.1-setup-admin-route.md**: Создание защищенного роута для админ-панели (`/admin`)
```
